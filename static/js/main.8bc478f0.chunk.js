(this["webpackJsonpreact-chess"]=this["webpackJsonpreact-chess"]||[]).push([[0],{30:function(e,t,n){},35:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),s=n(20),i=n.n(s),a=(n(30),n(25)),r=n(10),d=n.n(r),l=n(21),u=n(2),f=n(24),b=(n(35),n(4)),j=n.p+"static/media/wQ.b069e38b.svg",p=n.p+"static/media/wR.a5a16b36.svg",v=n.p+"static/media/wB.6a5db4e0.svg",h=n.p+"static/media/wN.72ce2510.svg",m=n(22),g=n.n(m),O=n(23),w=n.n(O),x=n(1),k=n(56);var P=function(){var e=Object(o.useState)(new k("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1")),t=Object(u.a)(e,1)[0],n=Object(o.useState)(t.fen()),c=Object(u.a)(n,2),s=c[0],i=c[1],r=Object(o.useState)(),m=Object(u.a)(r,2),O=m[0],P=m[1],S=Object(o.useState)(!1),E=Object(u.a)(S,2),C=E[0],y=E[1],N=Object(o.useState)(),M=Object(u.a)(N,2),B=M[0],I=M[1],T=Object(o.useState)(window.innerWidth),R=Object(u.a)(T,2),q=R[0],Q=R[1],J=Object(o.useState)(window.innerHeight),L=Object(u.a)(J,2),F=L[0],H=L[1],K=Object(o.useState)(null),A=Object(u.a)(K,2),z=A[0],D=A[1],U=Object(o.useState)([]),W=Object(u.a)(U,2),_=W[0],G=(W[1],g.a.createInstance("f4b36b6c897e41bfaa3904d75da40777")),X={uid:(Math.floor(9e4*Math.random())+1e4).toString(),token:""};Object(o.useEffect)((function(){Y().then((function(){console.log("integrations successful")}))}),[]),Object(o.useEffect)((function(){z&&(null===z||void 0===z||z.on("ChannelMessage",(function(e,t){console.log("MESSAGE: ",e,[_,e]);var n=JSON.parse(e.text);window.document.getElementById("chat-section").appendChild(document.createElement("div")).append("".concat(n.uid,": ").concat(n.msg))})),null===z||void 0===z||z.on("MemberJoined",(function(e){console.log("New member joined: ",e)})),null===z||void 0===z||z.join())}),[z]),Object(o.useEffect)((function(){console.log("CHAT HISTORY: ",_)}),[_]);var Y=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.a.get("https://agoratokenserver-demo.herokuapp.com/access_token?channel=test&uid=".concat(X.uid)).then((function(e){var t;console.log(e),X.token=(null===(t=e.data)||void 0===t?void 0:t.token)||"",G.login(X).then((function(){console.log("Login successful"),D(G.createChannel("test"))}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){return Z(),window.addEventListener("resize",Z),function(){return window.removeEventListener("resize",Z)}}),[]),Object(o.useEffect)((function(){console.log("pendingMove: ",O)}),[O]);var Z=function(){Q(window.innerWidth),H(window.innerHeight)},V=function(e){var n=O[0],o=O[1];t.move({from:n,to:o,promotion:e}),i(t.fen()),y(!1)},$={fen:s,coordinates:!0,turnColor:"w"===t.turn()?b.a[0]:b.a[1],addPieceZIndex:!0,autoCastle:!0,lastMove:B,highlight:{lastMove:!0},selectable:{enabled:!0},movable:function(){var e=new Map;return t.SQUARES.forEach((function(n){var o=t.moves({square:n,verbose:!0});o.length&&e.set(n,o.map((function(e){return e.to})))})),{free:!1,dests:e,showDests:!0,events:{after:function(e,n,o){return function(e){var n=t.moves({verbose:!0});console.log("moves: ",t.moves());for(var o=0,c=n.length;o<c;o++)if(-1!==n[o].flags.indexOf("p")&&n[o].from===e.from)return P([e.from,e.to]),void y(!0);var s=t.move(e);if(s){console.log(s.san),i(t.fen());var a=t.game_over();console.log("game-over: ",a),I([e.from,e.to])}}({from:e,to:n})}},rookCastle:!0}}(),events:{select:function(e){}}};return Object(x.jsxs)("div",{className:"app",id:"chessboard",children:[Object(x.jsxs)("div",{className:"side-section",children:[C&&Object(x.jsxs)("div",{className:"piece-promotion-prompt",children:["Promote To?",Object(x.jsxs)("div",{className:"roles",children:[Object(x.jsx)("span",{role:"presentation",onClick:function(){return V("q")},children:Object(x.jsx)("img",{src:j,alt:"",style:{width:50}})}),Object(x.jsx)("span",{role:"presentation",onClick:function(){return V("r")},children:Object(x.jsx)("img",{src:p,alt:"",style:{width:50}})}),Object(x.jsx)("span",{role:"presentation",onClick:function(){return V("b")},children:Object(x.jsx)("img",{src:v,alt:"",style:{width:50}})}),Object(x.jsx)("span",{role:"presentation",onClick:function(){return V("n")},children:Object(x.jsx)("img",{src:h,alt:"",style:{width:50}})})]})]}),"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"!==t.fen()&&Object(x.jsx)("div",{className:"undo-btn",onClick:function(){var e=t.undo();I([null===e||void 0===e?void 0:e.from,null===e||void 0===e?void 0:e.to]),i(t.fen())},children:"Undo"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{id:"chat-section",className:"chat-section",style:{padding:10,border:"black"}}),Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("input",{type:"text",id:"chatbox"}),Object(x.jsx)("button",{onClick:function(){!function(e){var t={uid:X.uid,msg:e},n={text:JSON.stringify(t)||"",messageType:"TEXT"};null===z||void 0===z||z.sendMessage(n).then((function(){window.document.getElementById("chat-section").appendChild(document.createElement("div")).append("".concat(X.uid,": ").concat(t.msg))}))}(window.document.getElementById("chatbox").value)},style:{padding:10},children:"Send"})]})]})]}),Object(x.jsx)("div",{className:"main-chessboard",children:Object(x.jsx)(f.a,{width:q<F?.5*q:.5*F,height:q<F?.5*q:.5*F,config:Object(a.a)({},$)})})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),s(e),i(e)}))};i.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(P,{})}),document.getElementById("root")),S()}},[[60,1,2]]]);
//# sourceMappingURL=main.8bc478f0.chunk.js.map